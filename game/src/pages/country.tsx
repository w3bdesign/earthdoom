import { useState, useEffect } from "react";

import { BsArrowLeft, BsArrowRight } from "react-icons/bs";

import { type NextPage } from "next";
import Head from "next/head";

import Navbar from "@/components/Header/Navbar";

const Country: NextPage = () => {
  // https://tailwind-elements.com/docs/standard/data/tables/

  const [myx, setMyx] = useState<number>(1);

  useEffect(() => {
    fetchData();
  }, [myx]);

  const fetchData = () => {
    if (!myx) return;
  };

  const handleChange = (event: { target: { value: string | number } }) => {
    const { value } = event.target;
    if (Number.isInteger(Number(value))) {
      setMyx(Number(value));
    }
  };

  const handlePrev = () => {
    setMyx(myx - 1);
  };

  const handleNext = () => {
    setMyx(myx + 1);
  };

  const mockData = [
    {
      id: 1,
      y: 10,
      tag: "Tag 1",
      nick: "Nick 1",
      commander: 1,
      score: 1000000,
      size: "Large",
      timer: Date.now(),
    },
    {
      id: 2,
      y: 20,
      tag: "Tag 2",
      nick: "Nick 2",
      commander: 2,
      score: 500000,
      size: "Medium",
      timer: Date.now() - 1000 * 60 * 10,
    },
    {
      id: 3,
      y: 30,
      tag: "Tag 3",
      nick: "Nick 3",
      commander: 3,
      score: 250000,
      size: "Small",
      timer: Date.now() - 1000 * 60 * 20,
    },
  ];

  return (
    <>
      <Head>
        <title>Earthdoom</title>
        <meta name="description" content="Generated by Earth Doom" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Navbar />
      <main className="min-h-screen bg-neutral-900">
        <div className="flex justify-center">
          <div className="my-6 mt-16">
            <button
              className="mr-2 rounded-lg bg-blue-500 px-4 py-2 text-white hover:bg-blue-700"
              onClick={handlePrev}
            >
              <BsArrowLeft className="mr-2 inline-block" />
              Previous
            </button>
            <input
              className="mr-2 rounded-lg border px-4 py-2"
              type="text"
              name="myx"
              size={5}
              maxLength={3}
              value={myx}
              onChange={handleChange}
            />
            <button
              className="rounded-lg bg-blue-500 px-4 py-2 text-white hover:bg-blue-700"
              onClick={handleNext}
            >
              Next
              <BsArrowRight className="ml-2 inline-block" />
            </button>
          </div>
        </div>

        <div className="relative flex flex-col justify-center overflow-hidden bg-neutral-900 p-6">
          <div className="relative sm:mx-auto">
            <div className="relative mb-6 w-full break-words p-6 shadow-lg">
              <img
                src="https://via.placeholder.com/250"
                alt=""
                className="mx-auto max-w-[250px] text-center"
              />
            </div>

            <table className="w-full text-left ring-1 ring-slate-400/10">
              <caption className="mb-10 text-xl font-medium text-white ">
                Continent name here | Score: 1000000
              </caption>
              <tbody>
                <tr>
                  <th
                    scope="col"
                    className="hidden h-12  bg-slate-200/90 px-6  text-sm font-bold  text-black  first:border-l-0 sm:table-cell"
                  >
                    Location
                  </th>
                  <th
                    scope="col"
                    className="hidden h-12  bg-slate-200/90 px-6  text-sm font-bold  text-black  first:border-l-0 sm:table-cell"
                  >
                    Tag
                  </th>
                  <th
                    scope="col"
                    className="hidden h-12  bg-slate-200/90  px-6 text-sm font-bold  text-black  first:border-l-0 sm:table-cell"
                  >
                    Nick
                  </th>
                  <th
                    scope="col"
                    className="hidden h-12  bg-slate-200/90 px-6  text-sm font-bold  text-black  first:border-l-0 sm:table-cell"
                  >
                    Score
                  </th>
                  <th
                    scope="col"
                    className="hidden h-12  bg-slate-200/90 px-6  text-sm font-bold  text-black  first:border-l-0 sm:table-cell"
                  >
                    Spying
                  </th>
                  <th
                    scope="col"
                    className="hidden h-12 bg-slate-200/90  px-6  text-sm font-bold  text-black backdrop-blur-sm first:border-l-0 sm:table-cell"
                  >
                    Mail
                  </th>
                </tr>

                {mockData.map((row) => (
                  <tr key={row.id} className="block border-b  bg-white last:border-b-0 sm:table-row sm:border-none">
                    <td
                      data-th="Name"
                      className="flex h-12 items-center   px-6 text-sm text-black transition duration-300 before:inline-block before:w-24 before:font-medium before:text-black before:content-[attr(data-th)':'] first:border-l-0 sm:table-cell sm:border-l sm:border-t sm:before:content-none"
                    >
                      {row.y}
                    </td>
                    <td
                      data-th="Tag"
                      className="flex h-12 items-center   px-6 text-sm text-black transition duration-300 before:inline-block before:w-24 before:font-medium before:text-black before:content-[attr(data-th)':'] first:border-l-0 sm:table-cell sm:border-l sm:border-t sm:before:content-none"
                    >
                      {row.tag}
                    </td>
                    <td
                      data-th="Name"
                      className="flex h-12 items-center   px-6 text-sm text-black transition duration-300 before:inline-block before:w-24 before:font-medium before:text-black before:content-[attr(data-th)':'] first:border-l-0 sm:table-cell sm:border-l sm:border-t sm:before:content-none"
                    >
                      <a href={`/communication?til=${row.id}`}>
                        <span
                          className={`text-${
                            row.commander === 1 ? "red" : "blue"
                          }`}
                        >
                          {row.nick}
                        </span>
                        {Date.now() - row.timer < 600000 && (
                          <span className="text-green-500"> (ONLINE)</span>
                        )}
                      </a>
                    </td>

                    <td
                      data-th="Name"
                      className="flex h-12 items-center   px-6 text-sm text-black transition duration-300 before:inline-block before:w-24 before:font-medium before:text-black before:content-[attr(data-th)':'] first:border-l-0 sm:table-cell sm:border-l sm:border-t sm:before:content-none"
                    >
                      {row.score.toString()}
                    </td>

                    <td
                      data-th="Name"
                      className="flex h-12 items-center   px-6 text-sm text-black transition duration-300 before:inline-block before:w-24 before:font-medium before:text-black before:content-[attr(data-th)':'] first:border-l-0 sm:table-cell sm:border-l sm:border-t sm:before:content-none"
                    >
                      <a href={`/spy?id=${row.id}`}>Spy</a>
                    </td>

                    <td
                      data-th="Name"
                      className="flex h-12 items-center   px-6 text-sm text-black transition duration-300 before:inline-block before:w-24 before:font-medium before:text-black before:content-[attr(data-th)':'] first:border-l-0 sm:table-cell sm:border-l sm:border-t sm:before:content-none"
                    >
                      <a href={`/spy?id=${row.id}`}>Mail</a>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      </main>
    </>
  );
};

export default Country;
